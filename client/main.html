	<head>
	  <title>Maximum</title>
	  <meta name="viewport" content="width=device-width, initial-scale=1">
	</head>

<body>
<div id='particles-js'></div>
	{{#if currentUser}}
		{{> dashboard}}
	{{else}}
		<div class='container'>
			<div id="loginForm">
				<div style="margin-bottom: 40px; margin-top: 20px; text-align: center;">
					{{> welcomeMessage}}
				</div>
				{{#if showLogin}}
					{{> register}}
				{{else}}
					{{> login}}
				{{/if}}
			</div>
		</div>
	{{/if}}
</body>

<template name="dashboard">
  <nav class="navbar navbar-expand-lg navbar-light bg-light" style="margin-bottom: 10px;">
		<div class="container">	
			<a class="navbar-brand" href="#"></a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
		
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item active">
						<a class="navbar-brand" href='#'><span class="fa fa-home" aria-hidden="true"></span> Home</a>
					</li>
					<li class="nav-item">
						<a class="navbar-brand" href='#'><span class="fa fa-bell" aria-hidden="true"></span> Notifications</a>
					</li>
					<li class="nav-item">
						<a class="navbar-brand" href='#'><span class="fa fa-envelope" aria-hidden="true"></span> Messages</a>
					</li>
				</ul>
				<form class="form-inline">
					<input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
					<button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
				</form>
				<li class="nav-item dropdown" style="list-style: none">
					<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Profile</a>
						<div class="dropdown-menu" aria-labelledby="navbarDropdown">
							<a class="dropdown-item" href="#">Action</a>
							<a class="dropdown-item" href="#">Another action</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item logout" href="#">Logout</a>
						</div>
				</li>
					<button class="btn btn-primary navbar-btn add-tweet-btn" href="#">Tweet</button>
			</div>
		</div>
	</nav>
	
	<div class="container">
		<div class="row">
			<div class="col-md-3">
				<div class="card card-body bg-light" style="margin:5px;">
					Profile
				</div>
				<div class="card card-body bg-light"  style="margin:5px;">
					<h3>Trends</h3>
					<ul>
						<li>#meteorJS</li>
						<li>#CSS</li>
						<li>#ford Fiesta</li>
					</ul>
				</div>
			</div>
			<div class="col-md-6">
				<!--{{> tweetForm}}-->
				{{> tweetBox}}
				{{#if tweets.count}}
					<div class="list-group">
						{{#each tweets}}
							<a class="list-group-item list-group-item-action flex-column align-items-start">
								<div class="d-flex w-100 justify-content-between">
									<h5 class="mb-1">{{email}}</h5>
									<small>{{formatTime createdAt}}</small>
								</div>
									<p class="mb-1">{{text}}</p>
								<div class="d-flex w-100 justify-content-between">
									<small>{{formatDate createdAt}}</small>
									{{#if isCurrentUser email}}
										<div>
											<button type="button" class="btn btn-primary update-btn"><span class="fa fa-arrow-up" aria-hidden="true"></span> Update</button>
											<button type="button" class="btn btn-primary delete-btn"><span class="fa fa-times" aria-hidden="true"></span> Delete</button>
										</div>
									{{/if}}
								</div>
							</a>
							<!-- Modal -->
							<div class="modal fade" id="updateModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
								<input id="update_id" type="text" class="form-control" name="update_id" hidden>
							  <div class="modal-dialog" role="document">
								<div class="modal-content">
								  <div class="modal-header">
									<h5 class="modal-title" id="exampleModalLabel">Update Tweet</h5>
									<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									  <span aria-hidden="true">&times;</span>
									</button>
								  </div>
								  <div class="modal-body">
									<form class="tweet-form-modal-update">
										<div class="form-group">
											<input id="updateTextBox" autocomplete="off" type="text" class="form-control" name="tweet" placeholder="What's happening?">
											<!--<input id="update_id" type="text" class="form-control" name="update_id" hidden>-->
											<small class="form-text text-muted char-count-modal-update">140</small>
										</div>
									</form>
								  </div>
								  <div class="modal-footer">
									<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
									<button type="button" class="btn btn-primary update-tweet-btn">Update</button>
								  </div>
								</div>
							  </div>
							</div>
						{{/each}}
					</div>
				{{else}}
					<li class="list-group-item flex-column">No Tweets</li>
				{{/if}}
			</div>
			<div class="col-md-3">
				<div class="card card-body bg-light" style="margin:5px;">
					
				</div>
			</div>
		</div>
	</div>
	
	<!-- Modal -->
	<div class="modal fade" id="tweetModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	  <div class="modal-dialog" role="document">
		<div class="modal-content">
		  <div class="modal-header">
			<h5 class="modal-title" id="exampleModalLabel">Compose New Tweet</h5>
			<button type="button" class="close" data-dismiss="modal" aria-label="Close">
			  <span aria-hidden="true">&times;</span>
			</button>
		  </div>
		  <div class="modal-body">
			{{> tweetFormModal}}
		  </div>
		  <div class="modal-footer">
			<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			<button type="button" class="btn btn-primary submit-tweet-btn">Tweet</button>
		  </div>
		</div>
	  </div>
	</div>
</template>

<template name="tweetBox">  
  <div class="tweetbox-container">
    <div class="panel panel-default tweetbox">
      <div class="panel-body">
        <!-- Text box for tweet content -->
        <textarea class="form-control" id="tweetText" placeholder="What's happening?" rows="3"></textarea>

        <!-- Character count & button -->
        <div class="pull-right btnGroup">
          <strong class="{{charClass}}">{{charCount}}</strong>
          <button class="btn btn-info pull-right" type="button" {{disableButton}}>Tweet</button>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="tweetForm">
	<form class="tweet-form">
		<div class="form-group">
			<input autocomplete="off" type="text" class="form-control" name="tweet" placeholder="What's happening?">
			<small class="form-text text-muted char-count">140</small>
		</div>
	</form>
</template>

<template name="tweetFormModal">
	<form class="tweet-form-modal">
		<div class="form-group">
			<input autocomplete="off" type="text" class="form-control" name="tweet" placeholder="What's happening?">
			<small class="form-text text-muted char-count-modal">140</small>
		</div>
		<!--<button type="submit" class="btn btn-default">Submit</button> -->
	</form>
</template>
	
<template name="welcomeMessage">
	<h1 style="color: white; text-decoration: none;">{{message}}</h1>
</template>
	
<template name="datetime">
   <h2 style="color: white; text-decoration: none;">{{currentTime}}</h2>
</template>
	
<template name="login">	
	<form id="LoginForm">
		<div class="form-group">
			<input placeholder="Email Address" class="form-control" type="email" name="loginEmail" required>
		</div>
		<div class="form-group">
			<input placeholder="Password" class="form-control" type="password" name="loginPassword" required>
		</div>
		<div class="form-group">
			<input class="form-control" type="submit" name="Login" value="Login">
		</div>
		<input class="form-control" type="submit" id="ToggleRegister" value="Create an account" formnovalidate>
	</form>
</template>

<template name="register">
	<form id="RegisterForm">
		<div class="form-group">
			<input placeholder="Email Address" class="form-control" type="email" name="registerEmail" required>
		</div>
		<div class="form-group">
			<input id="password" placeholder="Password" class="form-control" type="password" name="registerPassword" required>
		</div>
		<div class="form-group">
			<input placeholder="Confirm Password" class="form-control" type="password" name="registerPassword_" required>
		</div>
		<div class="form-group">
			<input class="form-control" type="submit" name="Create an account" value="Register">
		</div>
		<input href="#" class="form-control" type="submit" id="ToggleLogin" value="Back to Login" formnovalidate>
	</form>
</template>